# Threshold Optimalisatie Rapport

**Asset ID:** 1
**Lookback:** 365 dagen
**Analyse Timestamp:** 2026-01-05T21:28:26.268340

---

## Executive Summary

### Optimale Thresholds per Horizon

#### 1h Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| MI_GRID | 0.01 | 0.15 | MI=0.0126 |
| CART | 0.06 | 0.28 | CV_Accuracy=0.3960 |
| LOGREG | None | None | AUC=0.5688 |


#### 4h Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| MI_GRID | 0.01 | 0.25 | MI=0.0177 |
| CART | 0.06 | 0.5 | CV_Accuracy=0.3943 |
| LOGREG | None | None | AUC=0.5806 |


#### 1d Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| MI_GRID | 0.01 | 0.15 | MI=0.0218 |
| CART | 0.06 | 0.5 | CV_Accuracy=0.3423 |
| LOGREG | None | None | AUC=0.5232 |


## 1h Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 1h

**Optimale Parameters:**
- NEUTRAL_BAND: 0.01
- STRONG_THRESHOLD: 0.15
- Mutual Information: 0.0126

**Statistieken:**
- Train MI: 0.0126
- Test MI: 0.0138
- Train samples: 6,988
- Test samples: 1,748

**State Distribution (met optimale thresholds):**

- bearish: 11.5%
- bullish: 28.1%
- neutral: 47.2%
- strong_bearish: 4.9%
- strong_bullish: 8.3%

**Visualisatie:**

![MI Heatmap](1h/mi_heatmaps/mi_heatmap_1h.png)

### Decision Tree (CART) - 1h

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.28
- CV Accuracy: 0.3960

**Model Statistieken:**
- Train accuracy: 0.4015
- Test accuracy: 0.4325
- CV mean: 0.3960 (+/- 0.0040)
- Tree depth: 4
- Number of leaves: 11

**Feature Importance (Gini):**

- leading_score: 0.9205
- confirming_score: 0.0795
- coincident_score: 0.0000

**Gevonden Split Points:**

- leading_score: [-0.278, -0.167, -0.056, 0.056, 0.167]
- confirming_score: [0.167, 0.500, 0.833]

**Visualisaties:**

![Decision Tree](1h/decision_tree/tree_1h.png)

![Feature Importance](1h/decision_tree/feature_importance_1h.png)

### Logistic Regression - 1h

**Performance:**
- AUC: 0.5688

**Statistieken:**
- CV AUC mean: 0.5688 (+/- 0.0162)
- Test AUC: 0.5721
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 2.6212
- coincident_score: 0.3762
- confirming_score: 0.0205

**Visualisaties:**

![ROC Curve](1h/logistic_regression/roc_curve_1h.png)

![Coefficients](1h/logistic_regression/coefficients_1h.png)

## 4h Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 4h

**Optimale Parameters:**
- NEUTRAL_BAND: 0.01
- STRONG_THRESHOLD: 0.25
- Mutual Information: 0.0177

**Statistieken:**
- Train MI: 0.0177
- Test MI: 0.0236
- Train samples: 1,745
- Test samples: 437

**State Distribution (met optimale thresholds):**

- bearish: 14.2%
- bullish: 35.6%
- neutral: 46.9%
- strong_bearish: 1.9%
- strong_bullish: 1.4%

**Visualisatie:**

![MI Heatmap](4h/mi_heatmaps/mi_heatmap_4h.png)

### Decision Tree (CART) - 4h

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.5
- CV Accuracy: 0.3943

**Model Statistieken:**
- Train accuracy: 0.4103
- Test accuracy: 0.4279
- CV mean: 0.3943 (+/- 0.0113)
- Tree depth: 3
- Number of leaves: 7

**Feature Importance (Gini):**

- leading_score: 0.9826
- confirming_score: 0.0174
- coincident_score: 0.0000

**Gevonden Split Points:**

- leading_score: [-0.167, -0.056, 0.056, 0.167]
- confirming_score: [0.500]

**Visualisaties:**

![Decision Tree](4h/decision_tree/tree_4h.png)

![Feature Importance](4h/decision_tree/feature_importance_4h.png)

### Logistic Regression - 4h

**Performance:**
- AUC: 0.5806

**Statistieken:**
- CV AUC mean: 0.5806 (+/- 0.0133)
- Test AUC: 0.6142
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 2.7309
- coincident_score: -0.6553
- confirming_score: 0.1326

**Visualisaties:**

![ROC Curve](4h/logistic_regression/roc_curve_4h.png)

![Coefficients](4h/logistic_regression/coefficients_4h.png)

## 1d Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 1d

**Optimale Parameters:**
- NEUTRAL_BAND: 0.01
- STRONG_THRESHOLD: 0.15
- Mutual Information: 0.0218

**Statistieken:**
- Train MI: 0.0218
- Test MI: 0.0506
- Train samples: 289
- Test samples: 73

**State Distribution (met optimale thresholds):**

- bearish: 8.8%
- bullish: 31.2%
- neutral: 45.3%
- strong_bearish: 5.8%
- strong_bullish: 8.8%

**Visualisatie:**

![MI Heatmap](1d/mi_heatmaps/mi_heatmap_1d.png)

### Decision Tree (CART) - 1d

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.5
- CV Accuracy: 0.3423

**Model Statistieken:**
- Train accuracy: 0.4014
- Test accuracy: 0.3562
- CV mean: 0.3423 (+/- 0.0599)
- Tree depth: 1
- Number of leaves: 2

**Feature Importance (Gini):**

- leading_score: 1.0000
- coincident_score: 0.0000
- confirming_score: 0.0000

**Gevonden Split Points:**

- leading_score: [0.056]

**Visualisaties:**

![Decision Tree](1d/decision_tree/tree_1d.png)

![Feature Importance](1d/decision_tree/feature_importance_1d.png)

### Logistic Regression - 1d

**Performance:**
- AUC: 0.5232

**Statistieken:**
- CV AUC mean: 0.5232 (+/- 0.0857)
- Test AUC: 0.6208
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 1.4510
- coincident_score: 0.4371
- confirming_score: -0.4139

**Visualisaties:**

![ROC Curve](1d/logistic_regression/roc_curve_1d.png)

![Coefficients](1d/logistic_regression/coefficients_1d.png)

## Aanbevelingen

---

### 1h Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.22

✓ Methoden zijn consistent (spread: 0.05)

### 4h Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.38

✓ Methoden zijn consistent (spread: 0.05)

### 1d Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.33

✓ Methoden zijn consistent (spread: 0.05)

### Algemene Opmerkingen

1. **MI Grid Search** geeft de meest directe maat voor informatiewinst
2. **CART** is het meest interpreteerbaar en toont interactie-effecten
3. **LogReg** is het beste voor het optimaliseren van signaal-gewichten

**Volgende stappen:**
- Pas de aanbevolen thresholds toe met `--apply-results`
- Voer een walk-forward validatie uit om de impact te meten
- Monitor de state distribution na aanpassing

## Methodologie

---

### Data Selectie

- Alleen 60-minuut boundary data (geen 1-minuut sampling)
- Temporele train/test split (80/20) om lookahead bias te voorkomen
- Minimum 5000 samples vereist voor statistische significantie

### Mutual Information Grid Search

Grid search over alle combinaties van NEUTRAL_BAND en STRONG_THRESHOLD.
Meet de mutual information tussen gediscretiseerde composite states en outcome direction.

### Decision Tree (CART)

Laat het CART algoritme automatisch optimale split-points vinden.
Beperkt tot max_depth=4 en min_samples_leaf=100 om overfitting te voorkomen.

### Logistic Regression

L2-geregulariseerde logistische regressie voor binaire win/loss classificatie.
Coefficienten worden gedenormaliseerd voor directe interpretatie.

---

*Rapport gegenereerd door QBN v3 Threshold Optimizer*
