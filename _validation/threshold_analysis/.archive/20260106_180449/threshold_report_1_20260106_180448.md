# Threshold Optimalisatie Rapport

**Asset ID:** 1
**Lookback:** 365 dagen
**Analyse Timestamp:** 2026-01-06T17:58:26.629649

---

## Executive Summary

### Optimale Thresholds per Horizon

#### 1h Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| MI_GRID | 0.001 | 0.12 | MI=0.0127 |
| CART | 0.06 | 0.28 | CV_Accuracy=0.3996 |
| LOGREG | None | None | AUC=0.5690 |


#### 4h Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| MI_GRID | 0.001 | 0.25 | MI=0.0183 |
| CART | 0.06 | 0.28 | CV_Accuracy=0.3929 |
| LOGREG | None | None | AUC=0.5800 |


#### 1d Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| MI_GRID | 0.001 | 0.12 | MI=0.0203 |
| CART | 0.06 | 0.5 | CV_Accuracy=0.3578 |
| LOGREG | None | None | AUC=0.5238 |


## 1h Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 1h

**Optimale Parameters:**
- NEUTRAL_BAND: 0.001
- STRONG_THRESHOLD: 0.12
- Mutual Information: 0.0127

**Statistieken:**
- Train MI: 0.0127
- Test MI: 0.0141
- Train samples: 6,972
- Test samples: 1,744

**State Distribution (met optimale thresholds):**

- bearish: 11.5%
- bullish: 28.1%
- neutral: 47.3%
- strong_bearish: 4.8%
- strong_bullish: 8.3%

**Visualisatie:**

![MI Heatmap](1h/mi_heatmaps/mi_heatmap_1h.png)

### Decision Tree (CART) - 1h

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.28
- CV Accuracy: 0.3996

**Model Statistieken:**
- Train accuracy: 0.4025
- Test accuracy: 0.4326
- CV mean: 0.3996 (+/- 0.0053)
- Tree depth: 4
- Number of leaves: 11

**Feature Importance (Gini):**

- leading_score: 0.9183
- confirming_score: 0.0817
- coincident_score: 0.0000

**Gevonden Split Points:**

- leading_score: [-0.278, -0.167, -0.056, 0.056, 0.167]
- confirming_score: [0.167, 0.500, 0.833]

**Visualisaties:**

![Decision Tree](1h/decision_tree/tree_1h.png)

![Feature Importance](1h/decision_tree/feature_importance_1h.png)

### Logistic Regression - 1h

**Performance:**
- AUC: 0.5690

**Statistieken:**
- CV AUC mean: 0.5690 (+/- 0.0147)
- Test AUC: 0.5728
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 2.6447
- coincident_score: 0.3616
- confirming_score: 0.0223

**Visualisaties:**

![ROC Curve](1h/logistic_regression/roc_curve_1h.png)

![Coefficients](1h/logistic_regression/coefficients_1h.png)

## 4h Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 4h

**Optimale Parameters:**
- NEUTRAL_BAND: 0.001
- STRONG_THRESHOLD: 0.25
- Mutual Information: 0.0183

**Statistieken:**
- Train MI: 0.0183
- Test MI: 0.0236
- Train samples: 1,741
- Test samples: 436

**State Distribution (met optimale thresholds):**

- bearish: 14.2%
- bullish: 35.5%
- neutral: 47.0%
- strong_bearish: 1.8%
- strong_bullish: 1.4%

**Visualisatie:**

![MI Heatmap](4h/mi_heatmaps/mi_heatmap_4h.png)

### Decision Tree (CART) - 4h

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.28
- CV Accuracy: 0.3929

**Model Statistieken:**
- Train accuracy: 0.4227
- Test accuracy: 0.4266
- CV mean: 0.3929 (+/- 0.0189)
- Tree depth: 4
- Number of leaves: 11

**Feature Importance (Gini):**

- leading_score: 0.7712
- confirming_score: 0.1835
- coincident_score: 0.0453

**Gevonden Split Points:**

- leading_score: [-0.278, -0.167, -0.056, 0.056, 0.167]
- coincident_score: [0.167]
- confirming_score: [0.167, 0.500, 0.833]

**Visualisaties:**

![Decision Tree](4h/decision_tree/tree_4h.png)

![Feature Importance](4h/decision_tree/feature_importance_4h.png)

### Logistic Regression - 4h

**Performance:**
- AUC: 0.5800

**Statistieken:**
- CV AUC mean: 0.5800 (+/- 0.0151)
- Test AUC: 0.6139
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 2.8182
- coincident_score: -0.6459
- confirming_score: 0.1528

**Visualisaties:**

![ROC Curve](4h/logistic_regression/roc_curve_4h.png)

![Coefficients](4h/logistic_regression/coefficients_4h.png)

## 1d Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 1d

**Optimale Parameters:**
- NEUTRAL_BAND: 0.001
- STRONG_THRESHOLD: 0.12
- Mutual Information: 0.0203

**Statistieken:**
- Train MI: 0.0203
- Test MI: 0.0506
- Train samples: 288
- Test samples: 73

**State Distribution (met optimale thresholds):**

- bearish: 8.6%
- bullish: 31.3%
- neutral: 45.4%
- strong_bearish: 5.8%
- strong_bullish: 8.9%

**Visualisatie:**

![MI Heatmap](1d/mi_heatmaps/mi_heatmap_1d.png)

### Decision Tree (CART) - 1d

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.5
- CV Accuracy: 0.3578

**Model Statistieken:**
- Train accuracy: 0.4306
- Test accuracy: 0.4521
- CV mean: 0.3578 (+/- 0.0649)
- Tree depth: 4
- Number of leaves: 7

**Feature Importance (Gini):**

- leading_score: 0.5409
- confirming_score: 0.3152
- coincident_score: 0.1439

**Gevonden Split Points:**

- leading_score: [-0.167, -0.056, 0.056]
- coincident_score: [0.167]
- confirming_score: [0.167, 0.833]

**Visualisaties:**

![Decision Tree](1d/decision_tree/tree_1d.png)

![Feature Importance](1d/decision_tree/feature_importance_1d.png)

### Logistic Regression - 1d

**Performance:**
- AUC: 0.5238

**Statistieken:**
- CV AUC mean: 0.5238 (+/- 0.0797)
- Test AUC: 0.6208
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 1.3726
- coincident_score: 0.5727
- confirming_score: -0.4384

**Visualisaties:**

![ROC Curve](1d/logistic_regression/roc_curve_1d.png)

![Coefficients](1d/logistic_regression/coefficients_1d.png)

## Aanbevelingen

---

### 1h Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.20

⚠️ Let op: Methoden geven verschillende neutral_band waarden (spread: 0.06). Overweeg verdere analyse.

### 4h Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.27

⚠️ Let op: Methoden geven verschillende neutral_band waarden (spread: 0.06). Overweeg verdere analyse.

### 1d Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.31

⚠️ Let op: Methoden geven verschillende neutral_band waarden (spread: 0.06). Overweeg verdere analyse.

### Algemene Opmerkingen

1. **MI Grid Search** geeft de meest directe maat voor informatiewinst
2. **CART** is het meest interpreteerbaar en toont interactie-effecten
3. **LogReg** is het beste voor het optimaliseren van signaal-gewichten

**Volgende stappen:**
- Pas de aanbevolen thresholds toe met `--apply-results`
- Voer een walk-forward validatie uit om de impact te meten
- Monitor de state distribution na aanpassing

## Methodologie

---

### Data Selectie

- Alleen 60-minuut boundary data (geen 1-minuut sampling)
- Temporele train/test split (80/20) om lookahead bias te voorkomen
- Minimum 5000 samples vereist voor statistische significantie

### Mutual Information Grid Search

Grid search over alle combinaties van NEUTRAL_BAND en STRONG_THRESHOLD.
Meet de mutual information tussen gediscretiseerde composite states en outcome direction.

### Decision Tree (CART)

Laat het CART algoritme automatisch optimale split-points vinden.
Beperkt tot max_depth=4 en min_samples_leaf=100 om overfitting te voorkomen.

### Logistic Regression

L2-geregulariseerde logistische regressie voor binaire win/loss classificatie.
Coefficienten worden gedenormaliseerd voor directe interpretatie.

---

*Rapport gegenereerd door QBN v3 Threshold Optimizer*
