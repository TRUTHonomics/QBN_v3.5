# Threshold Optimalisatie Rapport

**Asset ID:** 1
**Lookback:** 365 dagen
**Analyse Timestamp:** 2026-01-09T18:14:07.085715

---

## Executive Summary

### Optimale Thresholds per Horizon

#### 1h Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| LOGREG | None | None | AUC=0.5735 |
| MI_GRID | 0.001 | 0.12 | MI=0.0127 |
| CART | 0.06 | 0.28 | CV_Accuracy=0.3967 |


#### 4h Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| LOGREG | None | None | AUC=0.5876 |
| MI_GRID | 0.001 | 0.25 | MI=0.0174 |
| CART | 0.06 | 0.28 | CV_Accuracy=0.3880 |


#### 1d Horizon

| Methode | NEUTRAL_BAND | STRONG_THRESHOLD | Score |
|---------|--------------|------------------|-------|
| LOGREG | None | None | AUC=0.4863 |
| MI_GRID | 0.001 | 0.12 | MI=0.0218 |
| CART | 0.06 | 0.5 | CV_Accuracy=0.3241 |


## 1h Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 1h

**Optimale Parameters:**
- NEUTRAL_BAND: 0.001
- STRONG_THRESHOLD: 0.12
- Mutual Information: 0.0127

**Statistieken:**
- Train MI: 0.0127
- Test MI: 0.0163
- Train samples: 7,005
- Test samples: 1,752

**State Distribution (met optimale thresholds):**

- bearish: 11.5%
- bullish: 28.0%
- neutral: 47.4%
- strong_bearish: 4.8%
- strong_bullish: 8.2%

**Visualisatie:**

![MI Heatmap](1h/mi_heatmaps/mi_heatmap_1h.png)

### Decision Tree (CART) - 1h

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.28
- CV Accuracy: 0.3967

**Model Statistieken:**
- Train accuracy: 0.4026
- Test accuracy: 0.4378
- CV mean: 0.3967 (+/- 0.0015)
- Tree depth: 4
- Number of leaves: 11

**Feature Importance (Gini):**

- leading_score: 0.8945
- confirming_score: 0.0696
- coincident_score: 0.0359

**Gevonden Split Points:**

- leading_score: [-0.278, -0.167, -0.056, 0.056, 0.167]
- coincident_score: [0.167]
- confirming_score: [0.167, 0.500, 0.833]

**Visualisaties:**

![Decision Tree](1h/decision_tree/tree_1h.png)

![Feature Importance](1h/decision_tree/feature_importance_1h.png)

### Logistic Regression - 1h

**Performance:**
- AUC: 0.5735

**Statistieken:**
- CV AUC mean: 0.5735 (+/- 0.0152)
- Test AUC: 0.5835
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 2.6165
- coincident_score: 0.3172
- confirming_score: 0.0467

**Visualisaties:**

![ROC Curve](1h/logistic_regression/roc_curve_1h.png)

![Coefficients](1h/logistic_regression/coefficients_1h.png)

## 4h Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 4h

**Optimale Parameters:**
- NEUTRAL_BAND: 0.001
- STRONG_THRESHOLD: 0.25
- Mutual Information: 0.0174

**Statistieken:**
- Train MI: 0.0174
- Test MI: 0.0239
- Train samples: 1,750
- Test samples: 438

**State Distribution (met optimale thresholds):**

- bearish: 14.4%
- bullish: 35.3%
- neutral: 47.1%
- strong_bearish: 1.8%
- strong_bullish: 1.4%

**Visualisatie:**

![MI Heatmap](4h/mi_heatmaps/mi_heatmap_4h.png)

### Decision Tree (CART) - 4h

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.28
- CV Accuracy: 0.3880

**Model Statistieken:**
- Train accuracy: 0.4240
- Test accuracy: 0.4315
- CV mean: 0.3880 (+/- 0.0168)
- Tree depth: 4
- Number of leaves: 11

**Feature Importance (Gini):**

- leading_score: 0.7720
- confirming_score: 0.1806
- coincident_score: 0.0474

**Gevonden Split Points:**

- leading_score: [-0.278, -0.167, -0.056, 0.056, 0.167]
- coincident_score: [0.167]
- confirming_score: [0.167, 0.500, 0.833]

**Visualisaties:**

![Decision Tree](4h/decision_tree/tree_4h.png)

![Feature Importance](4h/decision_tree/feature_importance_4h.png)

### Logistic Regression - 4h

**Performance:**
- AUC: 0.5876

**Statistieken:**
- CV AUC mean: 0.5876 (+/- 0.0080)
- Test AUC: 0.6002
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 2.7530
- coincident_score: -0.6853
- confirming_score: 0.1583

**Visualisaties:**

![ROC Curve](4h/logistic_regression/roc_curve_4h.png)

![Coefficients](4h/logistic_regression/coefficients_4h.png)

## 1d Horizon - Gedetailleerde Analyse

---

### MI Grid Search - 1d

**Optimale Parameters:**
- NEUTRAL_BAND: 0.001
- STRONG_THRESHOLD: 0.12
- Mutual Information: 0.0218

**Statistieken:**
- Train MI: 0.0218
- Test MI: 0.1012
- Train samples: 290
- Test samples: 73

**State Distribution (met optimale thresholds):**

- bearish: 8.5%
- bullish: 31.4%
- neutral: 45.2%
- strong_bearish: 5.8%
- strong_bullish: 9.1%

**Visualisatie:**

![MI Heatmap](1d/mi_heatmaps/mi_heatmap_1d.png)

### Decision Tree (CART) - 1d

**Afgeleide Parameters:**
- NEUTRAL_BAND: 0.06
- STRONG_THRESHOLD: 0.5
- CV Accuracy: 0.3241

**Model Statistieken:**
- Train accuracy: 0.4207
- Test accuracy: 0.3562
- CV mean: 0.3241 (+/- 0.0516)
- Tree depth: 4
- Number of leaves: 8

**Feature Importance (Gini):**

- leading_score: 0.6404
- confirming_score: 0.3596
- coincident_score: 0.0000

**Gevonden Split Points:**

- leading_score: [-0.167, -0.056, 0.056, 0.167]
- confirming_score: [0.167, 0.833]

**Visualisaties:**

![Decision Tree](1d/decision_tree/tree_1d.png)

![Feature Importance](1d/decision_tree/feature_importance_1d.png)

### Logistic Regression - 1d

**Performance:**
- AUC: 0.4863

**Statistieken:**
- CV AUC mean: 0.4863 (+/- 0.0787)
- Test AUC: 0.6533
- Regularization C: 1.0

**Geoptimaliseerde Gewichten (denormalized):**

- leading_score: 1.2629
- confirming_score: -0.4676
- coincident_score: 0.4308

**Visualisaties:**

![ROC Curve](1d/logistic_regression/roc_curve_1d.png)

![Coefficients](1d/logistic_regression/coefficients_1d.png)

## Aanbevelingen

---

### 1h Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.20

⚠️ Let op: Methoden geven verschillende neutral_band waarden (spread: 0.06). Overweeg verdere analyse.

### 4h Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.27

⚠️ Let op: Methoden geven verschillende neutral_band waarden (spread: 0.06). Overweeg verdere analyse.

### 1d Horizon

**Aanbevolen configuratie:**
- COMPOSITE_NEUTRAL_BAND: 0.03
- COMPOSITE_STRONG_THRESHOLD: 0.31

⚠️ Let op: Methoden geven verschillende neutral_band waarden (spread: 0.06). Overweeg verdere analyse.

### Algemene Opmerkingen

1. **MI Grid Search** geeft de meest directe maat voor informatiewinst
2. **CART** is het meest interpreteerbaar en toont interactie-effecten
3. **LogReg** is het beste voor het optimaliseren van signaal-gewichten

**Volgende stappen:**
- Pas de aanbevolen thresholds toe met `--apply-results`
- Voer een walk-forward validatie uit om de impact te meten
- Monitor de state distribution na aanpassing

## Methodologie

---

### Data Selectie

- Alleen 60-minuut boundary data (geen 1-minuut sampling)
- Temporele train/test split (80/20) om lookahead bias te voorkomen
- Minimum 5000 samples vereist voor statistische significantie

### Mutual Information Grid Search

Grid search over alle combinaties van NEUTRAL_BAND en STRONG_THRESHOLD.
Meet de mutual information tussen gediscretiseerde composite states en outcome direction.

### Decision Tree (CART)

Laat het CART algoritme automatisch optimale split-points vinden.
Beperkt tot max_depth=4 en min_samples_leaf=100 om overfitting te voorkomen.

### Logistic Regression

L2-geregulariseerde logistische regressie voor binaire win/loss classificatie.
Coefficienten worden gedenormaliseerd voor directe interpretatie.

---

*Rapport gegenereerd door QBN v3 Threshold Optimizer*
